# Granite Kotlin Plugin

A Kotlin compiler IR plugin providing a better component authoring experience for the Granite engine. The plugin
generates synthetic companion objects implementing the `ComponentType<T>` interface for classes annotated
with `@ComponentData`, removing the need to manually write the boilerplate code for type-safe components.

## Summary

The [plugin registrar](./src/main/kotlin/io/github/darvld/granite/plugin/GraniteComponentPluginRegistrar.kt) adds
three extensions:

- The `ComponentTypeResolveExtension` instructs the compiler to generate the synthetic companion objects, add the
  `ComponentType` interface, and define the `type` property.
- The `ComponentTypeGenerationExtension` adds a body to the `type` property generated by the synthetic resolve
  extension, assigning an ID to each component.
- The `ComponentTypeDeclarationChecker` registers custom diagnostics for known component authoring pitfalls.

Component IDs are assigned sequentially, starting at the minimum value specified in the plugin options, and up to a
maximum value. If more components are found than IDs are available, a compilation error will be raised.

## Building

This project is part of the build pre-pass, since it is required by others like the physics engine.